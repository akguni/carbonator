{% extends "carbonator/layout.html" %}
{% load static %}

{% block body %}

<!-- passing consumption data etc to javascript -->
{{ appliances|json_script:"appliances" }}
{{ costs|json_script:"costs" }}
{{ request.user.username|json_script:"username" }}

<div class="flexbox-container">
    <div class="flexbox-content item-1 swatch_3">
        <div class="input-box swatch_2">
            <form action="{% url 'bank' %}" id="lighting-form" method="POST">
                {% csrf_token %}
                <div class="title">Switch Off</div>
                <label for="appliance" class="explanation">Appliance</label>
                <select class="selection" id="appliance" name="appliance"></select>
                <div class="explanation">Consumption</div>
                <input type="text" inputmode="decimal" class="variables" id="consumption" name="consumption">
                <div class="units">Watts</div>
                <div class="explanation">For</div>
                <input type ="text" inputmode="decimal" class="variables" id="duration" name="duration">
                <div class="units">Minutes</div>

                {% if user.is_authenticated %}
                <input type="submit" class="button" id="bank" value="Bank!">
                {% endif %}
            </form>
        </div>
    </div>  
    
    <div class="flexbox-content item-2 swatch_4">
        <div class="input-box swatch_2">
            <div class="title">Result</div>
                <div>
                    <div>
                        <span class="result" id="kwh"></span>
                        <span>kWh</span>
                    </div>
                    <div>
                        <span class="result" id="money"></span>
                        <span class="header">{{ costs.moneyUnit }}</span>
                    </div>
                </div>
            </div>
        </div>
</div>

{% endblock %}

{% block script %}
    <script src="{% static 'carbonator/index.js' %}"></script>
{% endblock %}